app-id: com.github.ryonakano.tweaks
runtime: io.elementary.Platform
runtime-version: '7.3'
sdk: io.elementary.Sdk
command: tweaks
finish-args:
  - '--share=ipc'
  - '--socket=wayland'
  - '--socket=fallback-x11'
  - "--filesystem=xdg-run/dconf"
  - "--filesystem=host:ro"
  - "--talk-name=org.freedesktop.Flatpak"
modules:
  - name: "dconf"
    buildsystem: "meson"
    config-opts:
    - "-Dbash_completion=false"
    - "-Dman=false"
    cleanup:
    - "/include"
    - "/lib/pkgconfig"
    - "/libexec"
    - "/share/dbus-1"
    sources:
    - type: "archive"
      url: "https://download.gnome.org/sources/dconf/0.40/dconf-0.40.0.tar.xz"
      sha256: "cf7f22a4c9200421d8d3325c5c1b8b93a36843650c9f95d6451e20f0bcb24533"
    - type: "patch"
      path: "dconf-override.patch"
  - name: tweaks
    buildsystem: meson
    sources:
      - type: dir
        path: .
  - name: script
    buildsystem: simple
    sources:
      - type: file
        path: tweaks.sh
    build-commands:
      - install -Dm 755 tweaks.sh /app/bin/tweaks
